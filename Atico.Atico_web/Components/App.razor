@inject IJSRuntime JS
@inject NavigationManager Navigation

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <base href="/" />
    <link rel="stylesheet" href="bootstrap/bootstrap.min.css" />
    <link rel="stylesheet" href="app.css" />
    <link rel="stylesheet" href="Atico.Atico_web.styles.css" />
    <link rel="icon" type="image/png" href="favicon.png" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://fonts.cdnfonts.com/css/kantumruy-3" rel="stylesheet">
    <!--
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.theme.default.min.css">
  
    -->

    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    
    <!-- For Check_InSection visible Observer-->
    <script src="Inter_Sec_Observer.js"></script>
    
    <!-- Bootstrap CSS & JS (Replace these links if using locally) -->
    <!--
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"></script>

    <script src=$"https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js"></script>
    -->

    <HeadOutlet />
</head>

<body>
    <Routes />
    <script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=6067559c86540cc17e19c4d5" type="text/javascript" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <script src="_framework/blazor.web.js"></script>
    <script src="slide_products.js"></script>

   


   
    <!--
    <script src="slide_products.js"></script>
    // From https://timothyricks.notion.site/GSAP-Scrolltrigger-Intro-d5617be5fff54faaa2543f4b5851b167

    -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.8.0/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.8.0/ScrollTrigger.min.js"></script>
        
    <script>
    gsap.registerPlugin(ScrollTrigger);

    ScrollTrigger.defaults({
        markers: false
    });
    </script>

    <script>
        // Animate From
        $(".header_text-move").each(function (index) {
        let triggerElement = $(this);
        let targetElement = $(this);

        let tl = gsap.timeline({
            scrollTrigger: {
            trigger: triggerElement,
            // trigger element - viewport
            start: "top 90%",
            end: "center center",
            scrub: 1
            }
        });
        tl.from(targetElement, {
            y: "100%",
            duration: 1
        });
        });
        // Animate From
        $(".animation-out").each(function (index) {
        let triggerElement = $(this);
        let targetElement = $('.animation-out .up');

        let tl = gsap.timeline({
            scrollTrigger: {
            trigger: triggerElement,
            // trigger element - viewport
            start: "top top",
            end: "60% top",
            scrub: 1
            }
        });
        tl.to(targetElement, {
            y: "-100%",
            duration: 1
        });
        });
        // Animate From
        $(".animation-out").each(function (index) {
        let triggerElement = $(this);
        let targetElement = $('.animation-out .fix');

        let tl = gsap.timeline({
            scrollTrigger: {
            trigger: triggerElement,
            // trigger element - viewport
            start: "top top",
            end: "bottom 60%",
            scrub: 1
            }
        });
        tl.to(targetElement, {
            y: "30%",
            
            duration: 1
        });
        });

        // Sticky Circle Grow
        $(".sticky-circle_wrap").each(function (index) {
        let triggerElement = $(this);
        let targetElement = $(".sticky-circle_element");

        let tl = gsap.timeline({
            scrollTrigger: {
            trigger: triggerElement,
            // trigger element - viewport
            start: "top top",
            end: "bottom bottom",
            scrub: 1
            }
        });
        tl.fromTo(targetElement, {
            width: "35em",
            height: "35em",
            borderRadius: "35em"
            },
            {
            width: "100vw",
            height: "100vh",
            borderRadius: "0em",
            duration: 1
            }
        );
        });
        $(".sticky-circle_wrap").each(function (index) {
        let triggerElement = $(this);
        let targetElement = $(".sticky-circle_element");

        let tl = gsap.timeline({
            scrollTrigger: {
            trigger: triggerElement,
            // trigger element - viewport
            start: "top top",
            end: "bottom bottom",
            scrub: 1
            }
        });
        tl.fromTo(targetElement, {
            width: "35em",
            height: "35em",
            borderRadius: "35em"
            },
            {
            width: "100vw",
            height: "100vh",
            borderRadius: "0em",
            duration: 1
            }
        );
        });
        // Grid Title Change
        $('.grid_text-item').eq(0).addClass('is--active');
        // Run a function
        $(".grid_wrapper").each(function (index) {
        let triggerElement = $(this);
        let myIndex = $(this).index();
        let targetElement = $(".grid_text-item").eq(myIndex);
        let tl = gsap.timeline({
            scrollTrigger: {
            trigger: triggerElement,
            // trigger element - viewport
            start: "top bottom",
            end: "bottom bottom",
            onEnter: () => {
                $(".grid_text-item").removeClass("is--active");
                targetElement.addClass("is--active");
            },
            onEnterBack: () => {
                $(".grid_text-item").removeClass("is--active");
                targetElement.addClass("is--active");
            }
            }
        });
    });
    </script>


    <!-- For Splide Slider_section -->
    <script src="https://assets.website-files.com/6067559c86540cc17e19c4d5/js/tricks-menu-slider.00af47acc.js" type="module"></script>

    <script>

    var elms = document.getElementsByClassName( 'splide' );
    for ( var i = 0, len = elms.length; i < len; i++ ) {
        var splide=  new Splide( elms[ i ], {
        perPage: 3,
        perMove: 1,
        type   : 'loop',
        focus  : 'center',
        breakpoints: {
            767: {
            perPage: 1,
            }
        }
        } );
        splide.on('moved', function (newIndex) {
                    var activeSlide = splide.Components.Elements.slides[newIndex];
                    var newContent = activeSlide.dataset.info;
                    document.getElementById("Product-Name").textContent = newContent;
                });
        splide.mount();
        var initialSlide = splide.Components.Elements.slides[splide.index];
        document.getElementById("Product-Name").textContent = initialSlide.dataset.info;
    }
    $('.Div_Controlrs .Controlrs_Container a.next_Arrow').click(function() {
        $(this).closest('.section').find('.splide__arrow.splide__arrow--next').click();
    });
    $('.Div_Controlrs .Controlrs_Container a.prev_Arrow').click(function() {
        $(this).closest('.section').find('.splide__arrow.splide__arrow--prev').click();
    });
    
    // All Slliders
    
    </script>

</body>


</html>
@code {
    private IJSObjectReference? _jsModule;

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            _jsModule = await JS.InvokeAsync<IJSObjectReference>("import", "./Inter_Sec_Observer.js");
            Navigation.LocationChanged += async (sender, args) =>
            {
                await StartObserving();
            };
        }
        await StartObserving();
    }

    private async Task StartObserving()
    {
        if (_jsModule != null)
        {
            await _jsModule.InvokeVoidAsync("startIntersectionObserver");
        }
    }
}